!function(){"use strict";function t(t){for(var e,n="";t;)e=t%62,n=g[e]+n,t=Math.floor(t/62);return n}function e(t,e){k&&setTimeout(function(){"object"!=typeof e&&(e={}),e.token="181b3d7d22f7c71826d2f7db7c322028",e.distinct_id=k,e.time=(new Date).getTime(),"init"===t&&(e.ua=x,e.context=L.context);var n={event:t,properties:e};_.post({url:"https://api.mixpanel.com/track/",data:{ip:1,data:b(JSON.stringify(n))}})})}function n(t,e){return"object"==typeof t?t?(e&&"object"==typeof e||(e={}),M(t,function(t,o){return n(t,e[o])})):"boolean"==typeof e?e:t:"string"==typeof t&&"undefined"!=typeof e?String(e):typeof t==typeof e?e:t}function o(t){E(["key","amount"],function(e,n){if(!t[n])throw new Error("No "+n+" passed.")})}function i(t){var e;for(var n in t){var o=I[n];if("function"==typeof o&&(e=o(t[n]),"string"==typeof e))throw new Error("Invalid "+n+" ("+e+")")}}function r(t){if(!t||"object"!=typeof t)throw new Error("Invalid options");i(t);var e=n(A.defaults,t);E(t.notes,function(t,n){"object"!=typeof n&&(e.notes[t]=n)});try{"boolean"==typeof t.method.wallet&&(e.method.wallet=t.method.wallet)}catch(o){}return"string"==typeof t.key&&t.key.indexOf("rzp_live_")&&(k=null),L.setCommunicator(e),e}function a(t,e){var n=document.createElement(e),o={"class":"razorpay-checkout-frame",style:"height: 100%; position: relative; background: none; display: block; border: 0 none transparent; margin: 0px; padding: 0px;",allowtransparency:!0,frameborder:0,width:"100%",height:"100%",src:t};return E(o,function(t,e){n.setAttribute(t,e)}),n}function s(){tt.dismiss.call(this),tt.hidden.call(this)}function c(){R&&(clearInterval(R),R=null),z&&(_(window).off("unload",z),z=null),j=!1,G.reset(),Y&&Y.parentNode&&_(Y).remove();var t=P;if(t){var e=document.querySelector("head");e&&!t.parentNode&&e.appendChild(t)&&(P=null)}var n=this.checkoutFrame;n&&(S&&n.contentWindow&&n.contentWindow.close(),n.style.display="none"),U&&(U.style.display="none"),this instanceof A&&"function"==typeof this.options.modal.onhidden&&this.options.modal.onhidden()}function u(){var t={};Z(),E(this.options,function(e,n){"function"!=typeof n&&(t[e]=n)});for(var e in this.modal.options)this.options.modal[e]=this.modal.options[e];Q(t);var n={context:location.href,options:t};return k&&(n.id=k),n}function l(t,n){if(t.origin&&"frame"===n.source&&this.checkoutFrame&&!this.checkoutFrame.getAttribute("src").indexOf(t.origin)){var o=n.event;n=n.data;var i=tt[o];"function"==typeof i&&i.call(D,n),("dismiss"===o||"fault"===o)&&e(o,n)}}function f(){var t={},e=!1;E(B.attributes,function(n,o){var i=o.name;/^data-/.test(i)&&(e=!0,i=i.replace(/^data-/,""),t[i]=o.value)}),nt(t);var n=B.getAttribute("data-amount");n&&n.length>0?(t.handler=et,ot(A(t))):e&&A.configure(t)}function d(){var t=A.defaults.key;t||(p("checkout-frame.js"),p("../css/rp_checkout.css"))}function p(t){var e=document.createElement("link");e.setAttribute("rel","prefetch"),e.setAttribute("href",B.src.replace(/\/[^\/]+$/,"/"+t)),$.appendChild(e)}function h(t,e){return L.makeUrl(t)+"/checkout?key_id="+e}function m(t){var e,n;"object"==typeof t?(e=t.key,n=t):(e=t,n=A.defaults);var o=h(n,e);q=!1,this.checkoutFrame?this.checkoutFrame.src!==o?this.checkoutFrame.src=o:q=!0:(_.addMessageListener(l,this),this.checkoutFrame=a(o,S?"div":"iframe"),U.appendChild(this.checkoutFrame))}function y(){if(!U){U=document.createElement("div"),U.className="razorpay-container";var t=U.style,e={zIndex:"99999",position:O?"absolute":"fixed",top:0,display:"none",left:0,height:"100%",width:"100%","-webkit-transition":"0.2s ease-out top","-webkit-overflow-scrolling":"touch","-webkit-backface-visibility":"hidden","overflow-y":"visible"};E(e,function(e,n){t[e]=n}),W=document.createElement("div"),W.setAttribute("style","min-height: 100%; transition: 0.3s ease-out; -webkit-transition: 0.3s ease-out; -moz-transition: 0.3s ease-out; position: fixed; top: 0; left: 0; width: 100%; height: 100%; filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#96000000, endColorstr=#96000000);"),U.appendChild(W),$.appendChild(U)}}function v(){try{W.style.background="rgba(0,0,0,0.6)"}catch(t){}}var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",w=g+"+=";g=g.slice(52)+g.slice(0,52);var b=window.btoa;b||(b=function(t){var e,n,o,i,r,a;for(o=t.length,n=0,e="";o>n;){if(i=255&t.charCodeAt(n++),n===o){e+=w.charAt(i>>2),e+=w.charAt((3&i)<<4),e+="==";break}if(r=t.charCodeAt(n++),n===o){e+=w.charAt(i>>2),e+=w.charAt((3&i)<<4|(240&r)>>4),e+=w.charAt((15&r)<<2),e+="=";break}a=t.charCodeAt(n++),e+=w.charAt(i>>2),e+=w.charAt((3&i)<<4|(240&r)>>4),e+=w.charAt((15&r)<<2|(192&a)>>6),e+=w.charAt(63&a)}return e});var k=t(((new Date).getTime()-13885344e5).toString()+("000000"+Math.floor(1e6*Math.random())).slice(-6))+t(Math.floor(14776336*Math.random())),C=function(){},N=C,x=navigator.userAgent,S=/\(iP.+(Cr|Fx)iOS/.test(x),O=/iPhone|Android 2\./.test(x),A=window.Razorpay=function(t){return this instanceof A?("function"==typeof this.configure&&this.configure(t),this):new A(t)};A.defaults={protocol:"https",hostname:"api.razorpay.com",version:"v1",key:"",amount:"",currency:"INR",handler:N,notes:{},callback_url:"",redirect:!1,description:"",buttontext:"Pay Now",display_currency:"",display_amount:"",method:{netbanking:null,card:null,wallet:{}},prefill:{name:"",contact:"",email:"",card:{number:"",expiry_month:"",expiry_year:""}},modal:{ondismiss:N,onhidden:N,escape:!0,animation:!0,backdropClose:!1},theme:{color:"#00BCD4"},signature:"",name:"",image:""};var _=function(t){return"string"==typeof t?_(document.querySelector(t)):this instanceof _?void(this[0]=t):new _(t)},E=function(t,e){var n;if(t)if(t.length)for(n=0;n<t.length;n++)e(n,t[n]);else for(n in t)e(n,t[n])},M=function(t,e){var n=t instanceof Array?[]:{};return E(t,function(t,o){n[t]=e(o,t)}),n},F=function(t,e){if("object"==typeof t){var n="";return E(t,function(t,o){e&&(t=e+"["+t+"]"),n+=F(o,t)}),n}return'<input type="hidden" name="'+e+'" value="'+t+'">'};_.prototype={on:function(t,e,n,o){var i=this[0];if(i){var r,a=window.addEventListener;return r=a?function(t){3===t.target.nodeType&&(t.target=t.target.parentNode),e.call(o||this,t)}:function(t){t||(t=window.event),t.target||(t.target=t.srcElement||document),t.preventDefault||(t.preventDefault=function(){this.returnValue=!1}),e.call(o||i,t)},E(t.split(" "),function(t,e){a?i.addEventListener(e,r,!!n):i.attachEvent("on"+e,r)}),r}},off:function(t,e,n){window.removeEventListener?this[0].removeEventListener(t,e,!!n):window.detachEvent&&this[0].detachEvent("on"+t,e)},prop:function(t,e){var n=this[0];return 1===arguments.length?n[t]:n?(n&&(n[t]=e),this):""},reflow:function(){return this.prop("offsetWidth"),this},remove:function(){try{var t=this[0];t.parentNode.removeChild(t)}catch(e){}return this},hasClass:function(t){return(" "+this[0].className+" ").indexOf(" "+t+" ")>=0},addClass:function(t){var e=this[0];return t&&e&&(e.className?this.hasClass(t)||(e.className+=" "+t):e.className=t),this},removeClass:function(t){var e=this[0];if(e){var n=(" "+e.className+" ").replace(" "+t+" "," ").replace(/^ | $/g,"");e.className!==n&&(e.className=n)}return this},find:function(t){var e=this[0];return e?e.querySelectorAll(t):void 0},css:function(t,e){var n=this.prop("style");if(n){if(1===arguments.length)return n[t];try{n[t]=e}catch(o){}}return this},hide:function(){return this.css("display","none")},parent:function(){return _(this.prop("parentNode"))},html:function(t){return arguments.length?(this[0].innerHTML=t,this):this[0].innerHTML},focus:function(){return this[0]&&this[0].focus(),this}},_.clone=function(t){return JSON.parse(JSON.stringify(t))};var T=null,H=function(t,e){return function(n){if(n&&n.data&&"function"==typeof t){var o=n.data;if("string"==typeof o)try{o=JSON.parse(o)}catch(i){o={error:{description:"Unable to parse response"}}}t.call(e,n,o)}}};_.addMessageListener=function(t,e){T&&_.removeMessageListener(),T=_(window).on("message",H(t,e))},_.removeMessageListener=function(){_(window).off("message",T),T=null},_.post=function(t){var e=new XMLHttpRequest;e.open("post",t.url,!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.callback&&(e.onreadystatechange=function(){4===e.readyState&&200===e.status&&t.callback(JSON.parse(e.responseText))});var n=[];E(t.data,function(t,e){n.push(t+"="+e)}),e.send(n.join("&"))};var I={key:function(t){return t?void 0:""},notes:function(t){var e="";if("object"==typeof t){var n=0;if(E(t,function(){n++}),!(n>15))return;e="At most 15 notes are allowed"}return e},amount:function(t){var e=parseInt(t,10),n=String(t),o=-1!==n.indexOf(".");if(o&&C("Invalid amount",n),!e||"number"!=typeof e||100>e){var i="should be passed in paise. Minimum value is 100";return alert("Invalid amount. It "+i),i}},currency:function(t){return"INR"!==t?"INR is the only supported value.":void 0},display_currency:function(t){return"USD"!==t&&t!==A.defaults.display_currency?"Only USD is supported":void 0},display_amount:function(t){return t=String(t).replace(/([^0-9\. ])/g,""),t||t===A.defaults.display_amount?void 0:""}};A.prototype.configure=function(t){this.options=r.call(this,t),o(this.options),this.modal={options:{}};var n=_.clone(t);e("init",n)},A.configure=function(t){A.defaults=r(t)};var L={context:location.href,setCommunicator:N,makeUrl:function(t,e){return t.protocol+"://"+t.hostname+"/"+(e?"":t.version)},nextRequestRedirect:function(t){if(window!==window.parent&&"function"==typeof A.sendMessage)return A.sendMessage({event:"redirect",data:t});if("get"===t.method)location.href=t.url;else if("post"===t.method&&"object"==typeof t.content){var e=document.createElement("form"),n="";E(t.content,function(t,e){n+='<input type="hidden" name="'+t+'" value="'+e+'">'}),e.method="post",e.innerHTML=n,e.action=t.url,document.body.appendChild(e),e.submit()}}};L.isCheckout=!0;var j,q,D,R,z,J,U,W,Y,P,B=document.currentScript||function(){var t=document.getElementsByTagName("script");return t[t.length-1]}(),X=0,$=document.body||document.documentElement,V=$.style,G={_:{meta:null,overflow:""},reset:function(){V.overflow=this._.overflow,O&&E(G.listeners,function(t,e){_(window).off(t,e)})},clear:function(){if(this._.overflow=V.overflow,V.overflow="hidden",O){scrollTo(0,0);var t=U&&U.querySelector("iframe");t&&(G.orientationchange.call(t),G.scroll(),E(["orientationchange","scroll"],function(e,n){G.listeners[n]=_(window).on(n,G[n],!1,t)}))}},listeners:{},orientationchange:function(){this.style.height=Math.max(window.innerHeight||0,490)+"px"},scroll:function(){if(j&&"number"==typeof window.pageYOffset){var t,e=U.offsetTop-pageYOffset,n=U.offsetHeight+e;X<pageYOffset?n<.2*innerHeight&&0>e&&(t=pageYOffset+innerHeight-U.offsetHeight):X>pageYOffset&&e>.1*innerHeight&&n>innerHeight&&(t=pageYOffset),"number"==typeof t&&(U.style.top=Math.max(0,t)+"px"),X=pageYOffset}}};L.setCommunicator=function(t){S&&(J||(J=document.createElement("iframe"),J.style.display="none",document.documentElement.appendChild(J)),J.src=L.makeUrl(t,!0)+"CriOS-frame.php")},L.setCommunicator(A.defaults);var K=function(t){!S&&this.checkoutFrame&&("string"!=typeof t&&(t=JSON.stringify(t)),this.checkoutFrame.contentWindow.postMessage(t,"*"))},Q=function(t){if(t.image&&"string"==typeof t.image){if(/data:image\/[^;]+;base64/.test(t.image))return;if(t.image.indexOf("http")){var e=location.protocol+"//"+location.hostname+(location.port?":"+location.port:""),n="";"/"!==t.image[0]&&(n+=location.pathname.replace(/[^\/]*$/g,""),"/"!==n[0]&&(n="/"+n)),t.image=e+n+t.image}}},Z=function(){if("function"==typeof document.querySelector){var t=document.querySelector("head");if(t){var e=t.querySelector("meta[name=viewport]");e&&(P=e,_(e).remove()),Y||(Y=document.createElement("meta"),Y.setAttribute("name","viewport"),Y.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no")),Y.parentNode||t.appendChild(Y)}}},tt={load:function(){q=!0,D&&K.call(D,u.call(D))},redirect:function(t){L.nextRequestRedirect(t)},submit:function(t){var e=window.CheckoutBridge;e&&"function"==typeof e.onsubmit&&e.onsubmit(JSON.stringify(t))},dismiss:function(){W&&(W.style.background=""),D&&"function"==typeof D.options.modal.ondismiss&&D.options.modal.ondismiss()},hidden:function(){c.call(D)},success:function(t){var e=D.options.handler;"function"==typeof e&&setTimeout(function(){e.call(null,t)}),s.call(D),_(D.checkoutFrame).remove(),D=null},failure:function(t){s.call(D),alert("Payment Failed.\n"+t.error.description)},fault:function(t){alert("Oops! Something went wrong.\n"+t),c.call(D),D.close()}},et=function(t){var e=B.parentNode;e.innerHTML+=F(t),e.submit()},nt=function(t){var e,n,o,i;E(t,function(r,a){o=r.indexOf("."),o>-1&&(n=o,e=r.substr(0,n),i=r.substr(n+1),t[e]=t[e]||{},"true"===a?a=!0:"false"===a&&(a=!1),t[e][i]=a,delete t[r])}),t.method&&nt(t.method)},ot=function(t){var e=document.createElement("input"),n=B.parentNode;e.type="submit",e.value=t.options.buttontext,e.className="razorpay-payment-button",n.appendChild(e),n.onsubmit=function(e){return j?void 0:(e.preventDefault(),t.open(),!1)}};A.prototype.open=function(){var t=this.options;if(t&&!j){if(j=!0,D!==this&&(D=this,q&&tt.load.call(this)),m.call(this,t),U.style.display="block",G.clear(),S){var e=this,n=u.call(this);n.options.redirect=!0;var o=L.makeUrl(t)+"/checkout?key_id="+t.key+"&message="+b(JSON.stringify(n));z=_(window).on("unload",s,!1,this),this.checkoutFrame.contentWindow=window.open(o,""),R=setInterval(function(){e.checkoutFrame.contentWindow.closed&&s.call(e)},500)}this.checkoutFrame.contentWindow||(c(),alert((S?"Chrome for iOS":"This browser")+" is not supported.\nPlease try payment in another browser.")),D&&(this.checkoutFrame.style.display="block",Z(),K.call(this,{event:"open"})),v()}},A.prototype.close=function(){j&&K.call(this,{event:"close"})},L.validateCheckout=function(t){if("USD"===t.display_currency){if(t.display_amount=String(t.display_amount).replace(/([^0-9\. ])/g,""),!t.display_amount)return"display_amount"}else if(t.display_currency)return"display_currency"},y(),f(),d()}();
//# sourceMappingURL=checkout.js.map
